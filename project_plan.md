# План завершення Блоку 1 (DevHub)

Дата: 2025-09-06

Мета
- Завершити Блок 1: повна інтеграція автентифікації + навігації з реальною сторінкою дашборду (замість заглушки), забезпечити відповідність Чистій архітектурі, покриття базовими тестами, нуль лінтів.

Обсяг (in scope)
- Дашборд MVP: відображення даних поточного користувача (ім’я/емейл/верифікація), базові дії (Sign out), каркас для майбутніх секцій (карти/плейсхолдери без бізнес-логіки).
- Редіректи: стабільний перехід на `/dashboard` після логіну/реєстрації; неавторизовані — на `/auth/login`.
- Тести: віджет‑тест редіректів і відображення дашборду для авторизованого користувача; юніт‑тести auth (мінімально необхідні).
- Документація: README оновлення (Firebase за замовчуванням, запуск), короткий blueprint для Блоку 1.
- Якість: `flutter analyze`, `dart format .`, `flutter test` без помилок.

Поза обсягом (out of scope)
- Будь‑які складні модулі дашборду (аналітика, фіди, мережа, БД). Лише каркас/MVP.
- Інтеграції окрім Firebase Auth.

Архітектурні принципи
- Feature‑first + Clean Architecture: presentation ↔ domain ↔ data; розмежування залежностей; repository/use cases; UI на Riverpod; навігація — go_router.
- Firebase за замовчуванням (без прапорця). Для тестів — оверрайди провайдерів.

Покроковий план
1) Дашборд (MVP)
   - Оновити `DashboardPage` для реального UI:
     - AppBar з ім’ям/емейлом користувача (із `currentUserProvider`).
     - Body: дві карти — Quick actions (Sign out), Account info (email, emailVerified).
     - Коректна обробка станів: loading/error/empty.
   - Провайдери: повторно використати `currentUserProvider`, `authControllerProvider` (без зайвих контролерів для MVP).

2) Редіректи/старт
   - Перевірити й утвердити логіку `redirect` (вже виправлено):
     - loading → залишатися на `/splash`.
     - authenticated → `/dashboard` з `/`/`/splash`/`/auth/*`.
     - unauthenticated → `/auth/login` з будь‑де.

3) Тести
   - Віджет‑тест: редірект авторизованого користувача зі `splash` на `/dashboard` (оверрайд `authRepositoryProvider` → мок/фейк із користувачем).
   - Віджет‑тест: неавторизований → `/auth/login`.
   - Віджет‑тест: `DashboardPage` показує email користувача.

4) Документація
   - README: запуск (Firebase за замовчуванням), короткий опис архітектури, сценарій ручної перевірки.
   - blueprint.md (короткий): маршрути, провайдери, дані дашборду, залежності.

5) Якість і коміт
   - `dart format .`
   - `flutter analyze` (нуль лінтів)
   - `flutter test` (усе зелено)
   - Коміт: `feat(dashboard): add MVP dashboard and tests` + `docs: update README/blueprint`

Ризики і примітки
- Firebase options наразі web‑only (manual). Для мобільних/desktop потрібен `flutterfire configure` — поза обсягом цього кроку.
- У віджет‑тестах не використовуємо живий Firebase — робимо оверрайди провайдерів.

Критерії приймання (DoD)
- Після логіну/реєстрації миттєвий перехід на `/dashboard`.
- `DashboardPage` показує дані користувача і кнопку Sign out (працює).
- Всі тести проходять; `flutter analyze` без помилок; форматування застосовано.

Статус виконання
- [ ] 1) Дашборд (MVP)
- [ ] 2) Редіректи/старт — перевірено тестами
- [ ] 3) Тести (редіректи, дашборд)
- [ ] 4) Документація
- [ ] 5) Якість і коміт

